# Task2 EDA-数据探索性分析
===
### 1. EDA目标 (Exploratory Data Analysis)

1. EDA的价值主要在于熟悉数据集，了解数据集，对数据集进行验证来确定所获得数据集可以用于接下    来的机器学习或者深度学习使用。

2. 当了解了数据集之后我们下一步就是要去了解变量间的相互关系以及变量与预测值之间的存在关系。

3. 引导数据科学从业者进行数据处理以及特征工程的步骤,使数据集的结构和特征集让接下来的预测问    题更加可靠。
### 2. 内容及步骤
1.  载入各种数据科学以及可视化库:
	数据科学库 pandas、numpy、scipy；
	可视化库 matplotlib、seabon；
	其他；
2. 载入数据：
	载入训练集和测试集；
	简略观察数据(head()+shape)；
3. 数据总览:
	通过describe()来熟悉数据的相关统计量
	通过info()来熟悉数据类型
4. 判断数据缺失和异常
	查看每列的存在nan情况
	异常值检测
5. 了解预测值的分布
	总体分布概况（无界约翰逊分布等）
	查看skewness and kurtosis
	查看预测值的具体频数
6. 特征分为类别特征和数字特征，并对类别特征查看unique分布
7. 数字特征分析
	相关性分析
	查看几个特征得 偏度和峰值
	每个数字特征得分布可视化
	数字特征相互之间的关系可视化
	多变量互相回归关系可视化
8. 类型特征分析
	unique分布
	类别特征箱形图可视化
	类别特征的小提琴图可视化
	类别特征的柱形图可视化类别
	特征的每个类别频数可视化(count_plot)
	用pandas_profiling生成数据报告
### 3. 代码实战
#### 1 ) 载入包和数据
1. 载入各种数据科学以及可视化库
```
#coding:utf-8
#导入warnings包，利用过滤器来实现忽略警告语句。
import warnings
warnings.filterwarnings('ignore')

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
import missingno as msno

```
2. 载入数据
```
载入训练集和测试集；
path = './datalab/231784/'
Train_data = pd.read_csv(path+'used_car_train_20200313.csv', sep=' ')
Test_data = pd.read_csv(path+'used_car_testA_20200313.csv', sep=' ')
```
3. 所有特征集均脱敏处理(方便大家观看)
```
name - 汽车编码
regDate - 汽车注册时间
model - 车型编码
brand - 品牌
bodyType - 车身类型
fuelType - 燃油类型
gearbox - 变速箱
power - 汽车功率
kilometer - 汽车行驶公里
notRepairedDamage - 汽车有尚未修复的损坏
regionCode - 看车地区编码
seller - 销售方
offerType - 报价类型
creatDate - 广告发布时间
price - 汽车价格
v_0', 'v_1', 'v_2', 'v_3', 'v_4', 'v_5', 'v_6', 'v_7', 'v_8', 'v_9', 'v_10', 'v_11', 'v_12', 'v_13','v_14' 【匿名特征，包含v0-14在内15个匿名特征】
```

#### 2) 简略观察数据(head()+shape)

```
Train_data.head().append(Train_data.tail())
```
|       | SaleID | name   | regDate  | model | brand | bodyType | fuelType | gearbox | power | kilometer | ... | v_5      | v_6      | v_7      | v_8      | v_9      | v_10      | v_11      | v_12      | v_13      | v_14      |
| ----- | ------ | ------ | -------- | ----- | ----- | -------- | -------- | ------- | ----- | --------- | --- | -------- | -------- | -------- | -------- | -------- | --------- | --------- | --------- | --------- | --------- |
| 0     | 150000 | 66932  | 20111212 | 222.0 | 4     | 5.0      | 1.0      | 1.0     | 313   | 15.0      | ... | 0.264405 | 0.121800 | 0.070899 | 0.106558 | 0.078867 | -7.050969 | -0.854626 | 4.800151  | 0.620011  | -3.664654 |
| 1     | 150001 | 174960 | 19990211 | 19.0  | 21    | 0.0      | 0.0      | 0.0     | 75    | 12.5      | ... | 0.261745 | 0.000000 | 0.096733 | 0.013705 | 0.052383 | 3.679418  | -0.729039 | -3.796107 | -1.541230 | -0.757055 |
| 2     | 150002 | 5356   | 20090304 | 82.0  | 21    | 0.0      | 0.0      | 0.0     | 109   | 7.0       | ... | 0.260216 | 0.112081 | 0.078082 | 0.062078 | 0.050540 | -4.926690 | 1.001106  | 0.826562  | 0.138226  | 0.754033  |
| 3     | 150003 | 50688  | 20100405 | 0.0   | 0     | 0.0      | 0.0      | 1.0     | 160   | 7.0       | ... | 0.260466 | 0.106727 | 0.081146 | 0.075971 | 0.048268 | -4.864637 | 0.505493  | 1.870379  | 0.366038  | 1.312775  |
| 4     | 150004 | 161428 | 19970703 | 26.0  | 14    | 2.0      | 0.0      | 0.0     | 75    | 15.0      | ... | 0.250999 | 0.000000 | 0.077806 | 0.028600 | 0.081709 | 3.616475  | -0.673236 | -3.197685 | -0.025678 | -0.101290 |
| 49995 | 199995 | 20903  | 19960503 | 4.0   | 4     | 4.0      | 0.0      | 0.0     | 116   | 15.0      | ... | 0.284664 | 0.130044 | 0.049833 | 0.028807 | 0.004616 | -5.978511 | 1.303174  | -1.207191 | -1.981240 | -0.357695 |
| 49996 | 199996 | 708    | 19991011 | 0.0   | 0     | 0.0      | 0.0      | 0.0     | 75    | 15.0      | ... | 0.268101 | 0.108095 | 0.066039 | 0.025468 | 0.025971 | -3.913825 | 1.759524  | -2.075658 | -1.154847 | 0.169073  |
| 49997 | 199997 | 6693   | 20040412 | 49.0  | 1     | 0.0      | 1.0      | 1.0     | 224   | 15.0      | ... | 0.269432 | 0.105724 | 0.117652 | 0.057479 | 0.015669 | -4.639065 | 0.654713  | 1.137756  | -1.390531 | 0.254420  |
| 49998 | 199998 | 96900  | 20020008 | 27.0  | 1     | 0.0      | 0.0      | 1.0     | 334   | 15.0      | ... | 0.261152 | 0.000490 | 0.137366 | 0.086216 | 0.051383 | 1.833504  | -2.828687 | 2.465630  | -0.911682 | -2.057353 |
| 49999 | 199999 | 193384 | 20041109 | 166.0 | 6     | 1.0      | NaN      | 1.0     | 68    | 9.0       | ... | 0.228730 | 0.000300 | 0.103534 | 0.080625 | 0.124264 | 2.914571  | -1.135270 | 0.547628  | 2.094057  | -1.552150 |

> **目标**：要养成看数据集的head()以及shape的习惯，这会让你每一步更放心，导致接下里的连串的错误, 如果对自己的pandas等操作不放心，建议执行一步看一下，这样会有效的方便你进行理解函数并进行操作

#### 3) 总览数据概况(describe，info）
1. describe中有每列的统计量，个数count、平均值mean、方差std、最小值min、中位数25% 50% 75% 、以及最大值 看这个信息主要是瞬间掌握数据的大概的范围以及每个值的异常值的判断，比如有的时候会发现999 9999 -1 等值这些其实都是nan的另外一种表达方式，有的时候需要注意下
2. info 通过info来了解数据每列的type，有助于了解是否存在除了nan以外的特殊符号异常

#### 3.1) 通过describe()来熟悉数据的相关统计量
```
Train_data.describe()
```

| SaleID              | name                | regDate             | model               | brand               | bodyType            | fuelType            | gearbox             | power               | kilometer           | ...                 | v_5                 | v_6                 | v_7                 | v_8                 | v_9                 | v_10                | v_11                | v_12                | v_13                | v_14                |
| ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- | ------------------- |
| count               | 150000.000000       | 150000.000000       | 1.500000e+05        | 149999.000000       | 150000.000000       | 145494.000000       | 141320.000000       | 144019.000000       | 150000.000000       | 150000.000000       | ...                 | 150000.000000       | 150000.000000       | 150000.000000       | 150000.000000       | 150000.000000       | 150000.000000       | 150000.000000       | 150000.000000       | 150000.000000       |
| mean                | 74999.500000        | 68349.172873        | 2.003417e+07        | 47.129021           | 8.052733            | 1.792369            | 0.375842            | 0.224943            | 119.316547          | 12.597160           | ...                 | 0.248204            | 0.044923            | 0.124692            | 0.058144            | 0.061996            | -0.001000           | 0.009035            | 0.004813            | 0.000313            |
| std                 | 43301.414527        | 61103.875095        | 5.364988e+04        | 49.536040           | 7.864956            | 1.760640            | 0.548677            | 0.417546            | 177.168419          | 3.919576            | ...                 | 0.045804            | 0.051743            | 0.201410            | 0.029186            | 0.035692            | 3.772386            | 3.286071            | 2.517478            | 1.288988            |
| min                 | 0.000000            | 0.000000            | 1.991000e+07        | 0.000000            | 0.000000            | 0.000000            | 0.000000            | 0.000000            | 0.000000            | 0.500000            | ...                 | 0.000000            | 0.000000            | 0.000000            | 0.000000            | 0.000000            | -9.168192           | -5.558207           | -9.639552           | -4.153899           |
| 25%                 | 37499.750000        | 11156.000000        | 1.999091e+07        | 10.000000           | 1.000000            | 0.000000            | 0.000000            | 0.000000            | 75.000000           | 12.500000           | ...                 | 0.243615            | 0.000038            | 0.062474            | 0.035334            | 0.033930            | -3.722303           | -1.951543           | -1.871846           | -1.057789           |
| 50%                 | 74999.500000        | 51638.000000        | 2.003091e+07        | 30.000000           | 6.000000            | 1.000000            | 0.000000            | 0.000000            | 110.000000          | 15.000000           | ...                 | 0.257798            | 0.000812            | 0.095866            | 0.057014            | 0.058484            | 1.624076            | -0.358053           | -0.130753           | -0.036245           |
| 75%                 | 112499.250000       | 118841.250000       | 2.007111e+07        | 66.000000           | 13.000000           | 3.000000            | 1.000000            | 0.000000            | 150.000000          | 15.000000           | ...                 | 0.265297            | 0.102009            | 0.125243            | 0.079382            | 0.087491            | 2.844357            | 1.255022            | 1.776933            | 0.942813            |
| max                 | 149999.000000       | 196812.000000       | 2.015121e+07        | 247.000000          | 39.000000           | 7.000000            | 6.000000            | 1.000000            | 19312.000000        | 15.000000           | ...                 | 0.291838            | 0.151420            | 1.404936            | 0.160791            | 0.222787            | 12.357011           | 18.819042           | 13.847792           | 11.147669           |


#### 3.2)  通过 .info() 简要可以看到对应一些数据列名，以及NAN缺失信息

```
Train_data.info()
```
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 150000 entries, 0 to 149999
Data columns (total 31 columns):
SaleID               150000 non-null int64
name                 150000 non-null int64
regDate              150000 non-null int64
model                149999 non-null float64
brand                150000 non-null int64
bodyType             145494 non-null float64
fuelType             141320 non-null float64
gearbox              144019 non-null float64
power                150000 non-null int64
kilometer            150000 non-null float64
notRepairedDamage    150000 non-null object
regionCode           150000 non-null int64
seller               150000 non-null int64
offerType            150000 non-null int64
creatDate            150000 non-null int64
price                150000 non-null int64
v_0                  150000 non-null float64
v_1                  150000 non-null float64
v_2                  150000 non-null float64
v_3                  150000 non-null float64
v_4                  150000 non-null float64
v_5                  150000 non-null float64
v_6                  150000 non-null float64
v_7                  150000 non-null float64
v_8                  150000 non-null float64
v_9                  150000 non-null float64
v_10                 150000 non-null float64
v_11                 150000 non-null float64
v_12                 150000 non-null float64
v_13                 150000 non-null float64
v_14                 150000 non-null float64
dtypes: float64(20), int64(10), object(1)
memory usage: 35.5+ MB

#### 3.3) 判断数据缺失和异常